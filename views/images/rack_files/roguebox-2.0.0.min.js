!function(t){"function"==typeof t.fn.roguebox&&delete t.fn.roguebox,window.RogueboxItem=function(e,i){this.id=!1,this.caption=!1,this.title=!1,this.html="",this.el=e,this.$el=t(e),this.options=i,this.init()},RogueboxItem.prototype.init=function(){this.processElement()},RogueboxItem.prototype.processElement=function(){var e=!0;this.$el.find("*").each(function(){if(t(this).height()>0||t(this).width()>0)return e=!1,!1}),0==this.$el.children().length&&(e=!1);var i=this.$el.parents(".owl-carousel").length>0,o=this.$el.parents(".hidden").length>0||this.$el.parents(".rogueboxHidden").length>0;if(!i&&!o){if("inline"==this.$el.css("display")&&e)return!1;if("inline"!=this.$el.css("display")&&0==this.$el.height()&&0==this.$el.width())return!1}void 0!==this.$el.attr("roguebox")&&this.$el.attr("roguebox").length>0?this.id=this.$el.attr("roguebox"):void 0!==this.$el.attr("roguebox-id")&&this.$el.attr("roguebox-id").length>0?this.id=this.$el.attr("roguebox-id"):this.id="roguebox-"+(new Date).getTime();var s=this.$el.attr("theme");void 0!==s&&!1!==s?this.options.theme=s:(this.$el.hasClass("light")||void 0!==this.$el.attr("light")&&!1!==this.$el.attr("light"))&&(this.options.theme="light"),this.setCaption(),this.setTitle();var n=this.el.nodeName;"IMG"==n?this.processElement_img():"A"==n?this.processElement_a():this.processElement_div()},RogueboxItem.prototype.setCaption=function(){var t=this.$el.attr("roguebox-caption");void 0!==t&&!1!==t&&(this.caption=t)},RogueboxItem.prototype.setTitle=function(){var t=this.$el.attr("roguebox-title"),e=this.$el.attr("alt"),i=this.$el.attr("title");void 0!==t?this.title=t:void 0!==e?this.title=e:void 0!==i&&(this.title=i)},RogueboxItem.prototype.processElement_img=function(){this.addClick(),this.$el.attr("data-src",this.$el.attr("src")),this.$el.attr("src",""),this.addToBox(this.el.outerHTML,!0)},RogueboxItem.prototype.processElement_a=function(){var t=this.$el.children(),e=this.$el.attr("href"),i=this.$el.attr("alt");e.indexOf("youtu")>-1?this.processElement_youtube():e.indexOf(".jpg")>-1||e.indexOf(".png")>-1||e.indexOf(".jpeg")>-1||e.indexOf("slideshowpro")>-1?this.addToBox("<img data-src='"+e+"' alt='"+i+"' />",!0):1==t.length&&"img"==t[0].localName?this.addToBox(t[0].outerHTML):this.processElement_div(),this.addClick()},RogueboxItem.prototype.processElement_div=function(){this.$el.addClass("html"),this.addToBox(this.el.outerHTML),this.$el.remove()},RogueboxItem.prototype.processElement_youtube=function(){var e=this.$el.attr("href"),i=e.split("v=");i=i[1].split("&"),i=i[0],this.addToBox('<div class="you-tube"><iframe id="yt_'+i+'" width="560" height="315" src="https://www.youtube.com/embed/'+i+'?rel=0&enablejsapi=1" frameborder="0" allowfullscreen></iframe></div>'),youtube(t("#yt_"+i))},RogueboxItem.prototype.addClick=function(){this.$el.attr("onclick","jQuery.roguebox['"+this.id+"'].open("+this.rogueboxItemID+"); return false;")},RogueboxItem.prototype.addToBox=function(e,i){if(void 0===e||0==e.length)return!1;this.html=e,t.roguebox[this.id]instanceof Roguebox||(this.id=new Roguebox(this.id,this.options.theme).id),this.rogueboxItemID=t.roguebox[this.id].itemIterator++,t.roguebox[this.id].add(this.html,this.title,this.caption,this.rogueboxItemID,i)},window.Roguebox=function(t,e){return this.$self=null,this.$content=null,this.windowWidth=window.innerWidth,this.windowTimeout=0,this.nonLooping=!1,this.itemIterator=1,this.theme=e,this.id=t,this.crummyBrowser=this.getIsCrummyBrowser(),this.singleElement=!1,this.init()},Roguebox.prototype.init=function(){return this.id=null!=this.id&&this.id&&this.id.length>0?this.id:"roguebox-"+(new Date).getTime(),this.theme=null!=this.theme&&this.theme?this.theme:"dark",this.currentSlide=1,this.items=[],t.roguebox[this.id]instanceof Roguebox?(console.warn("Roguebox already created."),!1):(this.createBox(),t.roguebox[this.id]=this,this.id)},Roguebox.prototype.getIsCrummyBrowser=function(){for(var t=["MSIE","rv:11.0","CPU iPhone OS 6","CPU OS 6","CPU iPhone OS 7","CPU OS 7"],e=t.length,i=navigator.userAgent,o=0;o<e;o++)if(i.indexOf(t[o])>-1)return!0;return!1},Roguebox.prototype.createBox=function(){var e='<div id="'+this.id+'" class="roguebox-container '+this.theme+'">';e+="<div class='roguebox-content'></div>",e+="<span class='prev no-close'></span>",e+="<span class='next no-close'></span>",e+="<span class='close'></span>",e+="</div>",t("body").append(e),this.$self=t("#"+this.id),this.$content=this.$self.find(".roguebox-content"),this.setWatchers()},Roguebox.prototype.setWatchers=function(){this.$self.find(".prev").on("click",this.prev.bind(this)),this.$self.find(".next").on("click",this.next.bind(this)),this.$self.find(".close").touchClick(this.close.bind(this)),t(document).on("keydown",this.keydown.bind(this)),t(window).resize(this.windowResize.bind(this))},Roguebox.prototype.initMoveEvents=function(){this.isTouchStart=!1,this.$self.on("touchstart mousedown",this.touchstart.bind(this)),this.$self.on("touchmove mousemove",this.touchmove.bind(this)),this.$self.on("touchend mouseup",this.touchend.bind(this)),t(window).on("mouseleave",this.touchend.bind(this))},Roguebox.prototype.destroyMoveEvents=function(){this.isTouchStart=!1,this.$self.off("touchstart mousedown touchmove mousemove touchend mouseup")},Roguebox.prototype.setUpCarousel=function(e){if(this.loadImage(),this.items.length>=4&&!this.crummyBrowser&&-1==navigator.userAgent.indexOf("Chrome/")){var i=Math.round(this.windowWidth/2/Math.tan(Math.PI/this.items.length)),o=this;if(this.rotate_y=360/this.items.length,this.$content.find(".roguebox-item").each(function(e){var s="rotateY("+o.rotate_y*e+"deg) translate3d(0,-50%,"+i+"px)";t(this).css({"-webkit-transform":s,"ms-transform":s,"moz-transform":s,transform:s})}),!e){var s="rotateY(0deg) translate3d(0,0,0)";this.currentRotate=0,this.$content.css({"-webkit-transform":s,"moz-transform":s,"ms-transform":s,transform:s})}}else this.crummyBrowser?(this.$self.addClass("crummyBrowser nonLooping"),this.$content.addClass("crummyBrowser nonLooping"),this.$content.find(".roguebox-item").addClass("crummyBrowser nonLooping"),this.$content.find(".roguebox-item-container").addClass("crummyBrowser nonLooping"),this.nonLooping=!0,this.goTo(!1)):(this.$self.addClass("nonLooping"),this.$content.addClass("nonLooping"),this.$content.find(".roguebox-item").addClass("nonLooping"),this.$content.find(".roguebox-item-container").addClass("nonLooping"),this.nonLooping=!0,this.goTo(!1))},Roguebox.prototype.stopRogueBoxYouTubeVideos=function(){if("undefined"!=typeof youtubeVideoPlayers)for(var t=0;t<youtubeVideoPlayers.length;t++)"function"==typeof youtubeVideoPlayers[t].pauseVideo&&youtubeVideoPlayers[t].getPlayerState()==YT.PlayerState.PLAYING&&youtubeVideoPlayers[t].pauseVideo()},Roguebox.prototype.add=function(t,e,i,o,s){var n='<div class="roguebox-item" roguebox-item-id="'+o+'">';n+=e?'<div class="roguebox-item-title">'+e+"</div>":"",n+='<div class="roguebox-item-container">',n+=t,void 0!==i&&i&&i.length>0&&(n+='<div class="roguebox-item-caption">'+i+"</div>"),n+="</div>",n+="</div>",this.$content.append(n);var r=this.$content.children().last();r[0].caption=i,s&&r.addClass("full"),this.$content.find(".roguebox-item-container").find("*").addClass("no-close"),this.items.push(r[0])},Roguebox.prototype.open=function(e){this.close(),this.initMoveEvents(),this.setUpCarousel(),this.items.length>1?(this.singleElement=!1,t(".prev, .next").css("display","")):(this.singleElement=!0,t(".prev, .next").css("display","none"),this.loadImage()),t("body").css({overflow:"hidden"}),1==t("#"+this.id+" [roguebox-item-id="+e+"]").length&&(this.currentSlide=1,this.goTo(e)),this.$self.css("display","block"),youtube("doResize")},Roguebox.prototype.close=function(){this.stopRogueBoxYouTubeVideos(),t("body").css({overflow:""}),this.$self.css("display",""),this.destroyMoveEvents()},Roguebox.prototype.prev=function(){this.goTo("prev")},Roguebox.prototype.next=function(){this.goTo("next")},Roguebox.prototype.goTo=function(t){this.stopRogueBoxYouTubeVideos(),this.prevSlide=this.currentSlide;var e=1;if("number"==typeof t?(this.currentSlide=t,1==this.currentSlide?e=0:this.currentSlide>this.prevSlide&&(e=this.currentSlide-this.prevSlide)):"next"==t?(this.currentSlide++,e=1):"prev"==t?(this.currentSlide--,e=-1):e=0,this.currentSlide>=this.items.length+1?this.currentSlide=1:this.currentSlide<=0&&(this.currentSlide=this.items.length),this.loadImage(),this.nonLooping)this.currentLeft=(this.currentSlide-1)*this.windowWidth*-1,this.$content.css({left:this.currentLeft+"px"});else{var i=this.currentRotate-this.rotate_y*e,o="rotateY("+i+"deg) translate3d(0,0,0)";this.$content.css({"-webkit-transform":o,"ms-transform":o,transform:o}),this.currentRotate=i}},Roguebox.prototype.loadImage=function(){var e=t(t.roguebox[this.id].items[this.currentSlide-1]).find("img");e&&!e.attr("src")&&e.attr("src",e.attr("data-src")),e=t(t.roguebox[this.id].items[this.currentSlide]).find("img"),e&&!e.attr("src")&&e.attr("src",e.attr("data-src")),(e=t(t.roguebox[this.id].items[this.currentSlide+1]).find("img"))&&!e.attr("src")&&e.attr("src",e.attr("data-src"))},Roguebox.prototype.keydown=function(t){27==t.which?this.close():37==t.which?this.prev():39==t.which&&this.next()},Roguebox.prototype.windowResize=function(){var t=this;clearTimeout(this.windowTimeout),this.windowTimeout=setTimeout(function(){t.windowWidth=window.innerWidth,t.setUpCarousel(!0)},250)},Roguebox.prototype.touchstart=function(t){var e=t.target.className;if(e.indexOf("html")>-1||jQuery(t.target).parents(".html").length>0);else if("close"!=e&&"prev"!=e&&"next"!=e)t.preventDefault();else if("close"==e)return void t.preventDefault();this.isTouchStart=!0,this.timeStamp=t.timeStamp,t.originalEvent.type.indexOf("mouse")>-1?(this.startX=t.originalEvent.clientX,this.startY=t.originalEvent.clientY):(this.startX=t.originalEvent.changedTouches[0].clientX,this.startY=t.originalEvent.changedTouches[0].clientY),this.$content.addClass("no-transition")},Roguebox.prototype.touchmove=function(t){if(!this.isTouchStart)return!1;t.originalEvent.type.indexOf("mouse")>-1?(this.deltaX=t.originalEvent.clientX-this.startX,this.deltaY=t.originalEvent.clientY-this.startY):(this.deltaX=t.originalEvent.changedTouches[0].clientX-this.startX,this.deltaY=t.originalEvent.changedTouches[0].clientY-this.startY),(t.target.className.indexOf("html")>-1||jQuery(t.target).parents(".html").length>0)&&Math.abs(this.deltaY)>Math.abs(this.deltaX)||(t.preventDefault(),this.drag(t))},Roguebox.prototype.touchend=function(t){if(!this.isTouchStart)return!1;this.isTouchStart=!1,this.deltaTime=t.timeStamp-this.timeStamp,this.drag(t,!0)},Roguebox.prototype.drag=function(t,e){if(this.nonLooping&&!this.singleElement){var i=this.currentLeft+this.deltaX;this.$content.css({left:i+"px"})}else if(!this.singleElement){var o=this.deltaX/this.windowWidth,s=this.currentRotate-this.rotate_y*o*-1,n="rotateY("+s+"deg) translate3d(0,0,0)";this.$content.css({"-webkit-transform":n,"moz-transform":n,"ms-transform":n,transform:n})}if(e){var r=this.windowWidth<=1024,h=(r&&Math.abs(this.deltaY)>100&&this.deltaTime<250&&Math.abs(this.deltaX),t&&-1==t.target.className.indexOf("no-close")&&"div"==t.target.localName&&this.deltaTime<250&&Math.abs(this.deltaY)<50&&Math.abs(this.deltaX)<50);if(youTubeClick=t&&t.target.className.indexOf("you-tube")>-1&&this.deltaTime<250&&Math.abs(this.deltaY)<50&&Math.abs(this.deltaX)<50,h)this.close();else if(youTubeClick)this.playYouTube(t.target.children[0]);else{this.$content.removeClass("no-transition"),this.nonLooping&&(this.currentLeft=i);var a=Math.abs(this.deltaX);a/this.windowWidth>.15||a>300?this.nonLooping?this.deltaX>0?this.currentSlide-1<=0?this.goTo(!1):this.prev():this.deltaX<0&&(this.currentSlide+1>=this.items.length+1?this.goTo(!1):this.next()):this.deltaX>0?this.prev():this.deltaX<0&&this.next():this.goTo(!1),this.deltaX=0,this.deltaY=0,this.startX=0,this.startY=0}}},Roguebox.prototype.playYouTube=function(t){youtubeVideoPlayers.forEach(function(e){(e.a=t)&&(t.parentElement.className=t.parentElement.className+" playing",e.playVideo())})},t.fn.roguebox=function(e){t.roguebox={},t(".roguebox-container").remove();var i={theme:"dark",slideSpeed:750};e=t.extend({},i,e),this.each(function(){new RogueboxItem(this,e)})}}(jQuery);